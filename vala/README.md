twitter クライアント sayaka ちゃん (vala版)
======

vala版に必要なもの
---
* vala-0.28 くらい以上
* glib2
* gdk-pixbuf2
* (glib-networking)

pkgsrc なら
lang/vala, devel/glib2, graphics/gdk-pixbuf2, net/glib-networking
をインストールしてください。


インストール方法
---
展開したディレクトリ内だけで動作しますので、
適当なところに展開してください。
といいつつ後述の理由により ~/.sayaka/ に展開することを前提にしています。

コンパイルは以下のようにします。

```
% make vala-make2
% make
```

make install はないので、出来上がった vala/sayaka (実行ファイル) をパスの通ったところにインストールするとかしてください。


とりあえず使ってみる
---
sayaka を起動します。引数なしだとユーザストリームモードになります。
初回起動時、つまり `~/.sayaka/token.json` ファイルがない状態では
まず認証を行います。URL が表示されるのでこれをブラウザで開き、
アプリ連携を許可して、表示された PIN コードを入力します。
```
% sayaka
Please go to:
https://twitter.com/...

And input PIN code:
```

PIN を入力するとただちにユーザストリームモードになります。
2回目以降は sayaka を起動するだけです。


コマンドライン引数など
---
* `-4` … IPv4 のみを使用します。

* `-6` … IPv6 のみを使用します。

* `--color <n>` … 色数を指定します。デフォルトは 256色です。
	他はたぶん 16 と 2 (と 8?) くらいを想定しています。

* `--eucjp` … 文字コードを EUC-JP に変換して出力します。
	VT382J 等の EUC-JP (DEC漢字) に対応したターミナルで使えます。

* `--font <W>x<H>` … フォントの幅と高さを `--font 7x14` のように指定します。
	デフォルトではターミナルに問い合わせて取得しますが、
	ターミナルが対応してない場合などは勝手に 7x14 としますので、
	もし違う場合はこの `--font` オプションを使って指定してください。
	アイコンと画像はここで指定したフォントサイズに連動した大きさで表示されます。

* `--jis` … 文字コードを JIS に変換して出力します。
	NetBSD/x68k コンソール等の JIS に対応したターミナルで使えます。

* `--max-image-cols <n>` … 1行に表示する画像の最大数です。
	デフォルトは 0 で、この場合ターミナル幅を超えない限り横に並べて表示します。
	ターミナル幅、フォント幅が取得できないときは 1 として動作します。
	また外部 SIXEL エンコーダで画像を出力する際も 1 として動作します。

* `--noimg` … SIXEL 画像を一切出力しません。SIXEL 非対応ターミナル用。

* `--play` … ユーザストリームの代わりに標準入力の内容を再生します。

* `--protect` … 鍵付きアカウントのツイートを表示しません。
	デモ展示などの際にどうぞ。

* `--sixel-cmd <path>` … 外部の SIXEL エンコーダを指定します。
	今のところ img2sixel のオプションのみ対応しています
	(ので、オプション互換動作するものなら動くかも知れません)。
	このオプションを指定しない場合は内蔵エンコーダを使用します。

* `--support-evs` … EVS (絵文字セレクタ?) 文字をそのまま出力します。
	デフォルトは EVS 非対応ターミナル用に EVS 文字を出力しません。

* `--token <file>` … 認証トークンファイルを指定します。
	デフォルトは `~/.sayaka/token.json` です。

* `--white` … 白背景用の色合いに変更します。

* `--x68k` … NetBSD/x68k 用モードです。
	実際には --font 8x16 --jis の指定と、色の調整、画像モードの最適化などです。


TODO
---
* PHP 版にあって vala 版にない機能の移植。
